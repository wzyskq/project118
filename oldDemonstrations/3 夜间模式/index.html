<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夜间模式</title>

    <link rel="stylesheet" href="demo.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
</head>
<body>
    <div id="NightMode" onclick="NightMode()">
        <i class="bi bi-brightness-high" id="NMbacki"></i>
    </div>

    <script>
        function NightMode(){
            let NMback = document.getElementById('NightMode');
            let NMbacki = document.getElementById('NMbacki');
            let NMbacki1 = document.getElementsByClassName('bi bi-brightness-high');
            let NMbacki2 = document.getElementsByClassName('bi bi-brightness-high-fill');

            var NMstate = document.querySelector(':root');
            // console.log(NMstate)
            var NMstates = getComputedStyle(NMstate).getPropertyValue('--WholeShadow');
            // console.log(NMstates);
            try {
                let result = NMstates.match(/0, 0, 0, (0.5)/)[1];
                // console.log(result[1]);
                NMstate.style.setProperty('--WholeShadow', 'linear-gradient(rgba(0, 0, 0, 0),rgba(0, 0, 0, 0)) ');
                NMback.style.cssText = 'background-color: white;';
                NMbacki.style.cssText = 'color: black;';
                NMbacki2.className = 'bi bi-brightness-high';
            } catch (eer) {
                NMstate.style.setProperty('--WholeShadow', 'linear-gradient(rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0.5)) ');
                NMback.style.cssText = 'background-color: gray;';
                NMbacki.style.cssText = 'color: white;';
                NMbacki1.className = 'bi bi-brightness-high-fill';
            }        
        }
    </script>
</body>
</html>